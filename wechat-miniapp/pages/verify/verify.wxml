<!-- verify.wxml - 凭证验证页面 -->
<view class="container">
  <!-- 页面标题 -->
  <view class="header">
    <text class="title">凭证验证</text>
  </view>

  <!-- 验证表单区域 -->
  <view class="form-section" wx:if="{{!showResult}}">
    <view class="input-container">
      <text class="label">验证码</text>
      <view class="input-wrapper">
        <input 
          class="input" 
          type="text" 
          placeholder="请输入或扫描验证码"
          value="{{verificationCode}}"
          bindinput="onInputCode"
          disabled="{{isVerifying || isScanning}}"
        />
        <button 
          class="scan-btn"
          type="primary"
          size="mini"
          disabled="{{isVerifying || isScanning}}"
          bindtap="scanQRCode"
        >
          扫描
        </button>
      </view>
      <!-- 错误提示 -->
      <text class="error-msg" wx:if="{{errorMsg}}">{{errorMsg}}</text>
    </view>

    <!-- 操作按钮 -->
    <view class="button-group">
      <button 
        class="verify-btn"
        type="primary"
        loading="{{isVerifying}}"
        disabled="{{isVerifying || isScanning}}">
        {{isVerifying ? '验证中...' : '立即验证'}}
      </button>
      <button 
        class="clear-btn"
        type="default"
        disabled="{{isVerifying || isScanning}}">
        清除
      </button>
    </view>

    <!-- 说明文字 -->
    <view class="tips">
      <text class="tips-text">• 验证码一般为8-16位字母数字组合</text>
      <text class="tips-text">• 扫描二维码可快速获取验证码</text>
      <text class="tips-text">• 每个验证码仅限单次验证有效</text>
    </view>
  </view>

  <!-- 验证结果区域 -->
  <view class="result-section" wx:if="{{showResult}}">
    <view class="result-header">
      <view class="status-icon">
        <text class="icon-text" wx:if="{{credentialInfo && credentialInfo.isValid}}">✓</text>
        <text class="icon-text invalid" wx:else>✗</text>
      </view>
      <text class="status-text" wx:if="{{credentialInfo && credentialInfo.isValid}}">
        验证通过
      </text>
      <text class="status-text invalid" wx:else>
        验证失败
      </text>
    </view>

    <view class="result-card" wx:if="{{credentialInfo}}">
      <view class="card-item">
        <text class="item-label">凭证编号</text>
        <text class="item-value">{{credentialInfo.credentialId || 'N/A'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">员工姓名</text>
        <text class="item-value">{{credentialInfo.employeeName || 'N/A'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">所属公司</text>
        <text class="item-value">{{credentialInfo.companyName || 'N/A'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">职位</text>
        <text class="item-value">{{credentialInfo.position || 'N/A'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">签发时间</text>
        <text class="item-value">{{credentialInfo.issueDate || 'N/A'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">有效期至</text>
        <text class="item-value">{{credentialInfo.expiryDate || '永久'}}</text>
      </view>
      <view class="card-item">
        <text class="item-label">验证时间</text>
        <text class="item-value">{{credentialInfo.verificationTime || 'N/A'}}</text>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="result-actions">
      <button 
        class="retry-btn"
        type="default">
        重新验证
      </button>
      <button 
        class="history-btn"
        type="primary">
        查看历史
      </button>
    </view>
  </view>
</view>